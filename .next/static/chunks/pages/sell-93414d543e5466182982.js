(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{8334:function(e,n,r){"use strict";r.d(n,{$:function(){return Z},Z:function(){return _}});var t=r(5893),i=r(7261),o=r(3633),a=r(7450),d=r(9163),c=r(4985),s=r(1664),u=d.ZP.div.withConfig({displayName:"ItemStyles",componentId:"sc-16pk14u-0"})(["background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGray);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGray);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}"]),l=d.ZP.h3.withConfig({displayName:"Title",componentId:"sc-16nq74k-0"})(["margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}"]),p=d.ZP.span.withConfig({displayName:"PriceTag",componentId:"sc-nwbk6t-0"})(["background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;"]),f=r(4849),m=r(9227),h=r(5709);function g(){var e=(0,i.Z)(["\n  mutation DELETE_PRODUCT_MUTATION($id: ID!) {\n    deleteProduct(id: $id) {\n      id\n      name\n    }\n  }\n"]);return g=function(){return e},e}var b=(0,a.ZP)(g());function x(e,n){console.log(n),console.log("running the update function after delete"),e.evict(e.identify(n.data.deleteProduct))}function v(e){var n=e.id,r=e.children,i=(0,h.D)(b,{variables:{id:n},update:x}),o=(0,m.Z)(i,2),a=o[0],d=o[1],c=d.loading;d.error;return(0,t.jsx)("button",{type:"button",disabled:c,onClick:function(){confirm("Are you sure you want to delete this item?")&&(console.log("DELTEe"),a().catch((function(e){return alert(e.message)})))},children:r})}var j=r(4653);function y(){var e=(0,i.Z)(["\n  mutation ADD_TO_CART_MUTATION($id: ID!) {\n    addToCart(productId: $id) {\n      id\n    }\n  }\n"]);return y=function(){return e},e}var w=(0,a.ZP)(y());function P(e){var n=e.id,r=(0,h.D)(w,{variables:{id:n},refetchQueries:[{query:j.z}]}),i=(0,m.Z)(r,2),o=i[0],a=i[1].loading;return(0,t.jsxs)("button",{disabled:a,type:"button",onClick:o,children:["Add",a&&"ing"," To Cart \ud83d\uded2"]})}function k(e){var n,r,i=e.product;return(0,t.jsxs)(u,{children:[(0,t.jsx)("img",{src:null===i||void 0===i||null===(n=i.photo)||void 0===n||null===(r=n.image)||void 0===r?void 0:r.publicUrlTransformed,alt:i.name}),(0,t.jsx)(l,{children:(0,t.jsx)(s.default,{href:"/product/".concat(i.id),children:i.name})}),(0,t.jsx)(p,{children:(0,f.Z)(i.price)}),(0,t.jsx)("p",{children:i.description}),(0,t.jsxs)("div",{className:"buttonList",children:[(0,t.jsx)(s.default,{href:{pathname:"/update",query:{id:i.id}},children:"Edit \u270f\ufe0f"}),(0,t.jsx)(P,{id:i.id}),(0,t.jsx)(v,{id:i.id,children:"Delete"})]})]})}function O(){var e=(0,i.Z)(["\n  query ALL_PRODUCTS_QUERY($skip: Int = 0, $first: Int) {\n    allProducts(first: $first, skip: $skip) {\n      id\n      name\n      price\n      description\n      photo {\n        id\n        image {\n          publicUrlTransformed\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var Z=(0,a.ZP)(O()),T=d.ZP.div.withConfig({displayName:"Products__ProductsListStyles",componentId:"sc-1uv5x8m-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;"]);function _(e){var n=e.page,r=(0,o.a)(Z,{variables:{skip:n*c.ji-c.ji,first:c.ji}}),i=r.data,a=r.error,d=r.loading;return console.log(i,a,d),d?(0,t.jsx)("p",{children:"Loading..."}):a?(0,t.jsxs)("p",{children:["Error: ",a.message]}):(0,t.jsx)("div",{children:(0,t.jsx)(T,{children:i.allProducts.map((function(e){return(0,t.jsx)(k,{product:e},e.id)}))})})}},3804:function(e,n,r){"use strict";var t=r(9163),i=(0,t.F4)(["from{background-position:0 0;}to{background-position:100% 100%;}"]),o=t.ZP.form.withConfig({displayName:"Form",componentId:"sc-1xszr8q-0"})(["box-shadow:0 0 5px 3px rgba(0,0,0,0.05);background:rgba(0,0,0,0.02);border:5px solid white;padding:20px;font-size:1.5rem;line-height:1.5;font-weight:600;label{display:block;margin-bottom:1rem;}input,textarea,select{width:100%;padding:0.5rem;font-size:1rem;border:1px solid black;&:focus{outline:0;border-color:var(--red);}}button,input[type='submit']{width:auto;background:red;color:white;border:0;font-size:2rem;font-weight:600;padding:0.5rem 1.2rem;}fieldset{border:0;padding:0;&[disabled]{opacity:0.5;}&::before{height:10px;content:'';display:block;background-image:linear-gradient( to right,#ff3019 0%,#e2b04a 50%,#ff3019 100% );}&[aria-busy='true']::before{background-size:50% auto;animation:"," 0.5s linear infinite;}}"],i);n.Z=o},8363:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(6265),i=r(9227),o=r(7294);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,o.useState)(e),r=n[0],a=n[1],c=Object.values(e).join("");function s(e){var n=e.target,o=n.value,c=n.name,s=n.type;("number"===s&&(o=parseInt(o)),"file"===s)&&(o=(0,i.Z)(e.target.files,1)[0]);a(d(d({},r),{},(0,t.Z)({},c,o)))}function u(){a(e)}function l(){var e=Object.fromEntries(Object.entries(r).map((function(e){var n=(0,i.Z)(e,2),r=n[0];n[1];return[r,""]})));a(e)}return(0,o.useEffect)((function(){a(e)}),[c]),{inputs:r,handleChange:s,resetForm:u,clearForm:l}}},8380:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return x}});var t=r(5893),i=r(809),o=r.n(i),a=r(2447),d=r(9227),c=r(7261),s=r(5709),u=r(7450),l=r(8363),p=r(7847),f=r(8334),m=r(3804);function h(){var e=(0,c.Z)(['\n  mutation CREATE_PRODUCT_MUTATION(\n    # Which variables are getting passed in from the form? And What types are they\n    $name: String!\n    $description: String!\n    $price: Int!\n    $image: Upload\n  ) {\n    createProduct(\n      data: {\n        name: $name\n        description: $description\n        price: $price\n        status: "AVAILABLE"\n        photo: { create: { image: $image, altText: $name } }\n      }\n    ) {\n      id\n      price\n      description\n      name\n    }\n  }\n']);return h=function(){return e},e}var g=(0,u.ZP)(h());function b(){var e=(0,l.Z)({image:"",name:"Nice Shoes",price:34234,description:"These are the best shoes!"}),n=e.inputs,r=e.handleChange,i=e.clearForm,c=(e.resetForm,(0,s.D)(g,{variables:n,refetchQueries:[{query:f.$}]})),u=(0,d.Z)(c,2),h=u[0],b=u[1],x=b.loading,v=b.error;b.data;return(0,t.jsxs)(m.Z,{onSubmit:function(){var e=(0,a.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),console.log(n),e.next=4,h();case 4:i();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,t.jsx)(p.Z,{error:v}),(0,t.jsxs)("fieldset",{disabled:x,"aria-busy":x,children:[(0,t.jsxs)("label",{htmlFor:"image",children:["Image",(0,t.jsx)("input",{required:!0,type:"file",id:"image",name:"image",onChange:r})]}),(0,t.jsxs)("label",{htmlFor:"name",children:["Name",(0,t.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Name",value:n.name,onChange:r})]}),(0,t.jsxs)("label",{htmlFor:"price",children:["Price",(0,t.jsx)("input",{type:"number",id:"price",name:"price",placeholder:"price",value:n.price,onChange:r})]}),(0,t.jsxs)("label",{htmlFor:"description",children:["Description",(0,t.jsx)("textarea",{id:"description",name:"description",placeholder:"Description",value:n.description,onChange:r})]}),(0,t.jsx)("button",{type:"submit",children:"+ Add Product"})]})]})}function x(){return(0,t.jsx)("div",{children:(0,t.jsx)(b,{})})}},2368:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sell",function(){return r(8380)}])}},function(e){e.O(0,[774,888,179],(function(){return n=2368,e(e.s=n);var n}));var n=e.O();_N_E=n}]);