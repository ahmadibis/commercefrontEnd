(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{8334:function(n,i,e){"use strict";e.d(i,{$:function(){return T},Z:function(){return C}});var t=e(5893),r=e(7261),o=e(3633),d=e(7450),a=e(9163),s=e(4985),c=e(1664),u=a.ZP.div.withConfig({displayName:"ItemStyles",componentId:"sc-16pk14u-0"})(["background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGray);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGray);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}"]),l=a.ZP.h3.withConfig({displayName:"Title",componentId:"sc-16nq74k-0"})(["margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}"]),p=a.ZP.span.withConfig({displayName:"PriceTag",componentId:"sc-nwbk6t-0"})(["background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;"]),f=e(4849),g=e(9227),h=e(5709);function m(){var n=(0,r.Z)(["\n  mutation DELETE_PRODUCT_MUTATION($id: ID!) {\n    deleteProduct(id: $id) {\n      id\n      name\n    }\n  }\n"]);return m=function(){return n},n}var x=(0,d.ZP)(m());function v(n,i){console.log(i),console.log("running the update function after delete"),n.evict(n.identify(i.data.deleteProduct))}function b(n){var i=n.id,e=n.children,r=(0,h.D)(x,{variables:{id:i},update:v}),o=(0,g.Z)(r,2),d=o[0],a=o[1],s=a.loading;a.error;return(0,t.jsx)("button",{type:"button",disabled:s,onClick:function(){confirm("Are you sure you want to delete this item?")&&(console.log("DELTEe"),d().catch((function(n){return alert(n.message)})))},children:e})}var j=e(4653);function w(){var n=(0,r.Z)(["\n  mutation ADD_TO_CART_MUTATION($id: ID!) {\n    addToCart(productId: $id) {\n      id\n    }\n  }\n"]);return w=function(){return n},n}var y=(0,d.ZP)(w());function _(n){var i=n.id,e=(0,h.D)(y,{variables:{id:i},refetchQueries:[{query:j.z}]}),r=(0,g.Z)(e,2),o=r[0],d=r[1].loading;return(0,t.jsxs)("button",{disabled:d,type:"button",onClick:o,children:["Add",d&&"ing"," To Cart \ud83d\uded2"]})}function k(n){var i,e,r=n.product;return(0,t.jsxs)(u,{children:[(0,t.jsx)("img",{src:null===r||void 0===r||null===(i=r.photo)||void 0===i||null===(e=i.image)||void 0===e?void 0:e.publicUrlTransformed,alt:r.name}),(0,t.jsx)(l,{children:(0,t.jsx)(c.default,{href:"/product/".concat(r.id),children:r.name})}),(0,t.jsx)(p,{children:(0,f.Z)(r.price)}),(0,t.jsx)("p",{children:r.description}),(0,t.jsxs)("div",{className:"buttonList",children:[(0,t.jsx)(c.default,{href:{pathname:"/update",query:{id:r.id}},children:"Edit \u270f\ufe0f"}),(0,t.jsx)(_,{id:r.id}),(0,t.jsx)(b,{id:r.id,children:"Delete"})]})]})}function P(){var n=(0,r.Z)(["\n  query ALL_PRODUCTS_QUERY($skip: Int = 0, $first: Int) {\n    allProducts(first: $first, skip: $skip) {\n      id\n      name\n      price\n      description\n      photo {\n        id\n        image {\n          publicUrlTransformed\n        }\n      }\n    }\n  }\n"]);return P=function(){return n},n}var T=(0,d.ZP)(P()),Z=a.ZP.div.withConfig({displayName:"Products__ProductsListStyles",componentId:"sc-1uv5x8m-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;"]);function C(n){var i=n.page,e=(0,o.a)(T,{variables:{skip:i*s.ji-s.ji,first:s.ji}}),r=e.data,d=e.error,a=e.loading;return console.log(r,d,a),a?(0,t.jsx)("p",{children:"Loading..."}):d?(0,t.jsxs)("p",{children:["Error: ",d.message]}):(0,t.jsx)("div",{children:(0,t.jsx)(Z,{children:r.allProducts.map((function(n){return(0,t.jsx)(k,{product:n},n.id)}))})})}},1860:function(n,i,e){"use strict";e.r(i),e.d(i,{default:function(){return a}});var t=e(5893),r=e(2441),o=e(4912),d=e(8334);function a(){var n=(0,r.useRouter)().query,i=parseInt(n.page);return(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Z,{page:i||1}),(0,t.jsx)(d.Z,{page:i||1}),(0,t.jsx)(o.Z,{page:i||1})]})}},9343:function(n,i,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return e(1860)}])}},function(n){n.O(0,[774,888,179],(function(){return i=9343,n(n.s=i);var i}));var i=n.O();_N_E=i}]);